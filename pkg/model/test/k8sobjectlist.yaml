apiVersion: v1
kind: List
items:
- apiVersion: apiextensions.k8s.io/v1beta1
  kind: CustomResourceDefinition
  metadata:
    creationTimestamp: null
    name: certificates.certmanager.k8s.io
    labels:
      app.kubernetes.io/part-of: somepkg
  # ...
  spec:
    group: certmanager.k8s.io
    version: v1alpha1
    names:
      kind: Certificate
- apiVersion: v1
  kind: Deployment
  metadata:
    creationTimestamp: "2019-06-02T00:57:37Z"
    labels:
      k8s-app: kube-dns
      app.kubernetes.io/part-of: somepkg
    name: somedeployment
    namespace: mynamespace
  spec:
    containers:
    - args:
      - echo Hello World
      image: alpine:3.9
      name: myapp
      ports:
      - containerPort: 53
        name: dns
        protocol: UDP
    selector:
      matchLabels:
        app.kubernetes.io/part-of: somepkg
    template:
      metadata:
        labels:
          app.kubernetes.io/part-of: somepkg
- apiVersion: v1
  kind: List
  items:
  - apiVersion: v1
    kind: APIService
    metadata:
      name: myapiservice
      labels:
        app.kubernetes.io/part-of: somepkg
    spec:
      asdf: asdg
- apiVersion: v1
  kind: Deployment
  metadata:
    name: mydeployment
    namespace: mynamespace
    labels:
      app.kubernetes.io/part-of: somepkg
  spec:
    asdf: asdg
---
apiVersion: certmanager.k8s.io/v1alpha1
kind: Certificate
metadata:
  name: onemorecert
  namespace: cert-manager
  labels:
    app.kubernetes.io/part-of: somepkg
spec:
  secretName: onemorecert
  duration: 7000h
  issuerRef:
    name: cert-manager-webhook-selfsign
  commonName: "nested.cert"
---
apiVersion: apps/v1
kind: Deployment
metadata:
    creationTimestamp: "2019-06-24T23:20:59Z"
    generation: 1
    labels:
        app.kubernetes.io/part-of: somepkg
    name: cert-manager-webhook
    namespace: cert-manager
    resourceVersion: "15233"
    selfLink: /apis/apps/v1/namespaces/cert-manager/deployments/cert-manager-webhook
    uid: b99471c0-96d6-11e9-bafd-0242a54f69f8
spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 2
    selector:
        matchLabels:
            app: webhook
            app.kubernetes.io/part-of: cert-manager
            release: cert-manager
    strategy:
        rollingUpdate:
            maxSurge: 25%
            maxUnavailable: 25%
        type: RollingUpdate
    template:
        metadata:
            creationTimestamp: null
            labels:
                app: webhook
                app.kubernetes.io/part-of: cert-manager
                release: cert-manager
        spec:
            containers:
              - args:
                  - --v=12
                  - --secure-port=6443
                  - --tls-cert-file=/certs/tls.crt
                  - --tls-private-key-file=/certs/tls.key
                env:
                  - name: POD_NAMESPACE
                    valueFrom:
                        fieldRef:
                            apiVersion: v1
                            fieldPath: metadata.namespace
                image: quay.io/jetstack/cert-manager-webhook:v0.7.2
                imagePullPolicy: IfNotPresent
                name: webhook
                resources: {}
                terminationMessagePath: /dev/termination-log
                terminationMessagePolicy: File
                volumeMounts:
                  - mountPath: /certs
                    name: certs
            dnsPolicy: ClusterFirst
            restartPolicy: Always
            schedulerName: default-scheduler
            securityContext: {}
            serviceAccount: cert-manager-webhook
            serviceAccountName: cert-manager-webhook
            terminationGracePeriodSeconds: 30
            volumes:
              - name: certs
                secret:
                    defaultMode: 420
                    secretName: cert-manager-webhook-webhook-tls
